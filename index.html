<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack Hotseat</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
  font-family: 'Inter', sans-serif;
  background: radial-gradient(circle at top, #0b0b0b, #1a1a1a);
  color: #fff;
  overflow-x: hidden;
}
#table {
  max-width: 1200px;
  margin: auto;
  padding: 2rem;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.player-area {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 2rem;
}
.player {
  margin: 1rem;
  text-align: center;
}
.cards {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 0.5rem;
}
.card {
  width: 80px;
  height: 120px;
  border-radius: 8px;
  background-color: #fff;
  color: #000;
  margin: 0 0.3rem;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  font-size: 1.2rem;
  perspective: 1000px;
  cursor: pointer;
  transition: transform 0.5s;
  position: relative;
}
.card .front, .card .back {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 8px;
  backface-visibility: hidden;
}
.card .front {
  background-color: #fff;
  color: #000;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card .back {
  background-image: url('https://raw.githubusercontent.com/USERNAME/REPO/main/card-back.png'); /* Pfad zur Kartenrückseite */
  background-size: cover;
  transform: rotateY(180deg);
}
.card.flipped {
  transform: rotateY(180deg);
}
button {
  padding: 0.5rem 1rem;
  margin: 0.5rem;
  border: none;
  border-radius: 4px;
  background-color: #4ade80;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  background-color: #22c55e;
}
#dealer {
  margin-bottom: 2rem;
  text-align: center;
}
.hidden {
  display: none;
}
</style>
</head>
<body>
<div id="table">
  <div id="dealer">
    <h2>Dealer</h2>
    <div id="dealer-cards" class="cards"></div>
  </div>

  <div class="player-area" id="players"></div>

  <div id="controls">
    <button id="hit">Karte ziehen</button>
    <button id="stand">Passen</button>
    <button id="next">Nächster Spieler</button>
  </div>

  <div id="message" class="mt-4 text-yellow-400 font-bold"></div>
</div>

<script>
// Karten-Deck
const suits = ['♠','♥','♦','♣'];
const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
let deck = [];
function createDeck() {
  deck = [];
  for(let s of suits){
    for(let v of values){
      deck.push({suit:s,value:v});
    }
  }
  deck = deck.sort(()=> Math.random() - 0.5);
}
createDeck();

// Spieler
const players = [
  {id:'player1', name:'Spieler 1', hand: [], balance: 1000},
  {id:'player2', name:'Spieler 2', hand: [], balance: 1000},
  // weitere Spieler hier
];
let currentPlayerIndex = 0;
const dealerHand = [];

// HTML Referenzen
const playersDiv = document.getElementById('players');
const dealerCardsDiv = document.getElementById('dealer-cards');
const messageDiv = document.getElementById('message');

// Buttons
const hitBtn = document.getElementById('hit');
const standBtn = document.getElementById('stand');
const nextBtn = document.getElementById('next');

// Initialisierung
function renderPlayers() {
  playersDiv.innerHTML = '';
  for(const p of players){
    const div = document.createElement('div');
    div.className = 'player';
    div.id = p.id;
    div.innerHTML = `<h3>${p.name} (Guthaben: ${p.balance} J€)</h3>
                     <div class="cards" id="${p.id}-cards"></div>`;
    playersDiv.appendChild(div);
  }
}

// Karten zeichnen
function drawCard(){
  return deck.pop();
}

// Handwert berechnen
function handValue(hand){
  let value = 0;
  let aces = 0;
  for(let c of hand){
    if(['J','Q','K'].includes(c.value)) value += 10;
    else if(c.value==='A'){ value +=11; aces++; }
    else value += parseInt(c.value);
  }
  while(value>21 && aces>0){ value -=10; aces--; }
  return value;
}

// Karten rendern
function renderHand(hand, divId){
  const div = document.getElementById(divId);
  div.innerHTML = '';
  for(const c of hand){
    const cardDiv = document.createElement('div');
    cardDiv.className = 'card flipped';
    cardDiv.innerHTML = `<div class="front">${c.value}${c.suit}</div>
                         <div class="back"></div>`;
    div.appendChild(cardDiv);
  }
}

// Spiel starten
function startRound(){
  createDeck();
  dealerHand.length=0;
  for(const p of players) p.hand=[];
  // jeder Spieler bekommt 2 Karten
  for(const p of players){
    p.hand.push(drawCard());
    p.hand.push(drawCard());
    renderHand(p.hand, `${p.id}-cards`);
  }
  dealerHand.push(drawCard());
  dealerHand.push(drawCard());
  renderHand(dealerHand, 'dealer-cards');
  messageDiv.textContent = `${players[currentPlayerIndex].name} ist am Zug.`;
}
startRound();

// Button Events
hitBtn.addEventListener('click', ()=>{
  const player = players[currentPlayerIndex];
  player.hand.push(drawCard());
  renderHand(player.hand, `${player.id}-cards`);
  const val = handValue(player.hand);
  if(val>21){
    messageDiv.textContent = `${player.name} hat verloren! (${val})`;
  }
});

standBtn.addEventListener('click', ()=>{
  messageDiv.textContent = `${players[currentPlayerIndex].name} hat gepasst.`;
});

nextBtn.addEventListener('click', ()=>{
  currentPlayerIndex++;
  if(currentPlayerIndex>=players.length){
    dealerPlay();
  } else {
    messageDiv.textContent = `${players[currentPlayerIndex].name} ist am Zug.`;
  }
});

// Dealer-Logik
function dealerPlay(){
  while(handValue(dealerHand)<17){
    dealerHand.push(drawCard());
    renderHand(dealerHand, 'dealer-cards');
  }
  // Ergebnis
  const dealerVal = handValue(dealerHand);
  let results = '';
  for(const p of players){
    const val = handValue(p.hand);
    if(val>21) results += `${p.name} verliert (${val})\n`;
    else if(dealerVal>21 || val>dealerVal) {results+=`${p.name} gewinnt!\n`; p.balance+=100;}
    else if(val===dealerVal) results+=`${p.name} unentschieden\n`;
    else {results+=`${p.name} verliert (${val})\n`; p.balance-=100;}
  }
  renderPlayers();
  messageDiv.textContent = results;
  currentPlayerIndex=0;
}

// Sounds (Beispiel)
function playSound(url){
  const audio = new Audio(url);
  audio.play();
}

renderPlayers();
